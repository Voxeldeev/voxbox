<!DOCTYPE html>
<html lang="en">
<head>
    <!-- TODO: Figure out jQuery and select2 -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UltraBox Offline</title>
    <meta name="application-name" content="UltraBox Offline" />
    <meta name="description" content="UltraBox is a mod of BeepBox that aims to combine every other beepmod into one." />
    <meta name="theme-color" content="#444" />
    <meta name="msapplication-TileColor" content="#dba600" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link href="https://fonts.googleapis.com/css?family=B612" rel="stylesheet" media="none" onload="if (this.media != 'all') this.media='all';" /> <!-- this is a trick to load CSS asynchronously. -->
    <style type="text/css">

        html {
            background: var(--page-margin, black);
            overflow-x: hidden;
            font-size: large;
            font-family: 'B612', sans-serif;
            line-height: 1.3;
            color: var(--primary-text, white);
        }

        body {
            margin: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            align-content: center;
        }

        #beepboxEditorContainer {
            min-height: 645px;
            overflow: auto;
            background: var(--editor-background, black);
            width: 100%;
			max-width: 710px;
            padding-left: 30px;
            padding-right: 30px;
        }

        #text-content {
            overflow: auto;
            background: var(--editor-background, black);
            width: 100%;
			max-width: 710px;
            padding-left: 30px;
            padding-right: 30px;
        }

        h1 {
            font-size: 1.7rem;
            text-align: center;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            -webkit-text-stroke-width: 0;
            color: var(--mod-title, var(--link-accent, #9c64f7));
        }

        h2 {
            font-size: 1.5rem;
            text-align: center;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            -webkit-text-stroke-width: 0;
        }

        .centerDiv {
			margin: 0px auto;
		}

        a {
            color: var(--link-accent, #98f);
        }

        .donation form {
            display: inline;
        }

        .donation input[type="submit"] {
            appearance: none;
            -webkit-appearance: none;
            background: none;
            border: none;
            font-family: inherit;
            font-size: inherit;
            color: var(--link-accent, #98f);
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
            margin: 0;
        }

        /* wide screen */
		@media (min-width: 711px) {
            html {
                width: 100%;
            }

            body {
                width: 100%;
            }

            .column-container {
				width: 710px;
                display: flex;
				gap: 25px;
            }

            .instructions-column {
				min-width: 0;
            }

        /* narrow screen */
		@media (max-width: 710px) {
            body {
                width: 100%;
            }

            p, .donation {
                margin: 1em 0.5em;
            }

            .column-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body id="secondImage">
    <script>
        const image = localStorage.getItem('customTheme2');
        const el  = document.getElementById('secondImage');
        // console.log(image, el);
        if (image != null && image !== "null" && image !== "undefined") {
            el.style.backgroundImage="url(" + image + ")";
            el.style.backgroundRepeat= "repeat";
        }
    </script>
    <div id="beepboxEditorContainer">
        <noscript>
            Sorry, UltraBox requires a JavaScript-enabled browser.
        </noscript>
    </div>
    <div id="text-content">
        <section>

            <h1>
                <font>UltraBox</font>
                <span id="goldboxPlant" style="display: inline; color:#62a13b"></span>
            </h1>

            <p id="introduction">
                This is the offline version of UltraBox.<br>
                You can load samples by dropping them into the <code>samples</code> folder, and then inputting eg. <code>file:samples/samples1.wav</code>
                <br>You can also load samples from websites if you're connected to the internet.
            </p>
    </div>

    <script src="/neutralino.js"></script>
    <script src="/main.js"></script>
    <script src="beepbox_editor.min.js"></script>

    <script type="text/javascript">
        // Randomize display of header
        // 1-in-23
        //I should rework this sometime (maybe add the midbox tips thingy?)
        if (Math.floor(Math.random() * 8) == 0) {
            switch (Math.floor(Math.random() * 22)) {
                // jummbox/goldbox plants
                case 0:
                    document.getElementById("goldboxPlant").innerHTML = "  üçÇ";
                    break;
                case 1:
                    document.getElementById("goldboxPlant").innerHTML = "  üåø";
                    break;
                case 2:
                    document.getElementById("goldboxPlant").innerHTML = "  üå∫";
                    break;
                case 3:
                    document.getElementById("goldboxPlant").innerHTML = "  üçÉ";
                    break;
                case 4:
                    document.getElementById("goldboxPlant").innerHTML = "  üçÑ";
                    break;
                case 5:
                    document.getElementById("goldboxPlant").innerHTML = "  üçÄüå∑";
                    break;
                case 6:
                    document.getElementById("goldboxPlant").innerHTML = "  üåàüçÇüçÅüçÄüå∑üçÑüê≤üåàüçÉüå∫üçÑ";
                    break;
                case 7:
                    document.getElementById("goldboxPlant").innerHTML = "  1Ô∏è‚É£3Ô∏è‚É£1Ô∏è‚É£2Ô∏è‚É£";
                    break;
                // blubox plants 
			    case 8:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚âΩ(‚óï ·¥ó ‚óï)‚âº";
                    break;
			    case 9:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚âΩ(·¥ó _ ·¥ó)‚âº";
                    break;
			    case 10:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚âΩ(‚åê _ ‚åê)‚âº";
                    break;
			    case 11:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚âΩ(·µï ‚Äø ·µï)‚âº";
                    break;
                // familiarbox plant (there were others, but the code of familiarbox is long gone) 
                // this is actually a reference to really old lore chippy made for one of their projects 
			    case 12:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚òÄÔ∏è‚≠êüïíüëÅÔ∏è";
                    break;
                // suggested by mel, meant to supplement the lack of a worm logo 
                // (in case it doesn't show up, this is meant to be a worm emoji)
			    case 13:
                    document.getElementById("goldboxPlant").innerHTML = "  ü™±";
                    break;
                // don't remember where this one is from, most likely it's from ultrabox or familiarbox
                case 14:
                    document.getElementById("goldboxPlant").innerHTML = "  :wackybox:";
                    break;
                // plant suggested by mel, in reference to the "(don't eat) thegubbys" meme
			    case 15:
                    document.getElementById("goldboxPlant").innerHTML = "  üêü";
                    break;
                 // blubox desktop plants 
                 case 16:
                    document.getElementById("goldboxPlant").innerHTML = "  ‚ö°";
                    break;
                case 17:
                    document.getElementById("goldboxPlant").innerHTML = "  üîµ";
                    break;
                case 18:
                    document.getElementById("goldboxPlant").innerHTML = "  üí´";
                    break;
                case 19:
                    document.getElementById("goldboxPlant").innerHTML = "  üëΩ";
                    break;
                // dogebox2 plants 
                case 20:
                    document.getElementById("goldboxPlant").innerHTML = "  üçï";
                    break;
                case 21:
                    document.getElementById("goldboxPlant").innerHTML = "  üå≠";
                    break;
                case 22:
                    document.getElementById("goldboxPlant").innerHTML = "  üçî";
                    break;
                case 23:
                    document.getElementById("goldboxPlant").innerHTML = "  üçü";
                    break;
            }
        }

        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|android|ipad|playbook|silk/i.test(navigator.userAgent)) {
            document.getElementById("introduction").innerHTML = "UltraBox is an online tool for sketching and sharing chiptune melodies. Make sure that your volume is turned up, then press the play button!";
            document.getElementById("keyboard-instructions").style.display = "none";
            document.getElementById("mobile-instructions").style.display = "";
            document.getElementById("bar-editing").innerHTML = "Tap the boxes to move to a different part of the song, or tap on the currently selected box to swap which pattern is played during that part of the song.";
			//document.getElementById("offline-instructions").innerHTML = 'You can use BeepBox when your device is offline if you put a shortcut to BeepBox on your home screen. <ul><li>Chrome: find the "Add to Home Screen" option in the ‚ãÆ menu.</li><li>Firefox: find the "Add Page Shortcut" option in the ‚ãÆ menu.</li><li>Safari: find the "Add to Home Screen" option in the bookmark menu.</li></ul>';
        }
    </script>
</body>
</html>
